<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python for Data Science - Mock Exam</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Use Inter font */
        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* Custom styles for correct/incorrect feedback */
        .question-block.correct {
            background-color: #f0fdf4; /* green-50 */
            border-color: #22c55e; /* green-500 */
        }
        
        .question-block.incorrect {
            background-color: #fef2f2; /* red-50 */
            border-color: #ef4444; /* red-500 */
        }
        
        /* Custom styles for input feedback */
        input.correct {
            border-color: #22c55e; /* green-500 */
            background-color: #f0fdf4; /* green-50 */
        }
        
        input.incorrect {
            border-color: #ef4444; /* red-500 */
            background-color: #fef2f2; /* red-50 */
        }

        /* Styles for the code block inputs */
        pre input {
            background-color: #374151; /* gray-700 */
            color: #f9fafb; /* gray-50 */
            border: 1px solid #9ca3af; /* gray-400 */
            border-radius: 4px;
            padding: 2px 4px;
            margin: 0 4px;
            width: 100px; /* Give a default width */
        }
        
        pre input.correct {
            border-color: #4ade80; /* green-400 */
            background-color: #166534; /* green-800 */
        }
        
        pre input.incorrect {
            border-color: #f87171; /* red-400 */
            background-color: #991b1b; /* red-800 */
        }

        /* Styles for label/text feedback */
        .label-correct {
            color: #166534; /* green-800 */
            font-weight: 600;
        }
        
        .label-incorrect {
            color: #991b1b; /* red-800 */
            font-weight: 600;
            text-decoration: line-through;
        }

        .feedback-text {
            font-style: italic;
            font-weight: 600;
            color: #166534; /* green-800 */
        }
        
        .feedback-text-incorrect {
            font-style: italic;
            font-weight: 600;
            color: #991b1b; /* red-800 */
        }
        
        .code-feedback-correct {
            color: #4ade80; /* green-400 */
            font-style: italic;
            margin-left: 8px;
        }
        
        .code-feedback-incorrect {
            color: #f87171; /* red-400 */
            font-style: italic;
            margin-left: 8px;
        }

        /* Offset for sticky nav */
        .section-header {
            scroll-margin-top: 5rem; /* Adjust based on nav height */
        }
    </style>
    <!-- Preload Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100">

    <!-- Sticky Navigation -->
    <nav class="sticky top-0 z-50 bg-white shadow-md">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <span class="font-bold text-lg text-blue-700">ITAYA0-44</span>
                <div class="flex space-x-4">
                    <a href="#section-a-header" class="text-gray-600 hover:text-blue-600 font-medium px-3 py-2 rounded-md transition">Section A</a>
                    <a href="#section-b-header" class="text-gray-600 hover:text-blue-600 font-medium px-3 py-2 rounded-md transition">Section B</a>
                    <a href="#section-c-header" class="text-gray-600 hover:text-blue-600 font-medium px-3 py-2 rounded-md transition">Section C</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-12 pb-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto bg-white p-6 sm:p-8 lg:p-10 rounded-lg shadow-xl">
            
            <!-- Exam Header -->
            <header class="mb-8">
                <h2 class="text-2xl font-semibold text-blue-700">Python for Data Science</h2>
                <h6 class="text-gray-600 mt-2">Instructions: Answer all questions in each section. 
                    When finished, click the "Submit Exam" button at the bottom to see your results.<b> NOTE THIS IS NOT THE EXAM, DO NOT CRAM.</b></h6>
            </header>

            <!-- Exam Content Area -->
            <div id="exam-form">

                <!-- Section A: Multiple Choice -->
                <section class="mb-10">
                    <h2 id="section-a-header" class="section-header text-2xl font-semibold text-gray-700 border-b-2 border-blue-600 pb-2 mb-6">Section A: Multiple Choice Questions</h2>
                    <div id="section-a-content" class="space-y-6">
                        <!-- Questions will be injected by JavaScript -->
                    </div>
                </section>

                <!-- Section B: True/False -->
                <section class="mb-10">
                    <h2 id="section-b-header" class="section-header text-2xl font-semibold text-gray-700 border-b-2 border-blue-600 pb-2 mb-6">Section B: True or False Questions</h2>
                    <div id="section-b-content" class="space-y-6">
                        <!-- Questions will be injected by JavaScript -->
                    </div>
                </section>

                <!-- Section C: Matching & Fill-in-the-Code -->
                <section class="mb-10">
                    <h2 id="section-c-header" class="section-header text-2xl font-semibold text-gray-700 border-b-2 border-blue-600 pb-2 mb-6">Section C: Matching & Fill-in-the-Code</h2>
                    <div id="section-c-content" class="space-y-8">
                        <!-- Questions will be injected by JavaScript -->
                    </div>
                </section>

            </div>

            <!-- Submission Controls -->
            <div class="mt-12 text-center">
                <button id="submit-btn" class="bg-blue-600 text-white font-bold text-lg py-3 px-8 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200">
                    Submit Exam
                </button>
                <div id="score-container" class="mt-6 text-2xl font-bold text-gray-800"></div>
            </div>

        </div>
    </div>

    <!-- Results Modal -->
    <div id="results-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60" onclick="closeModal()">
        <div class="bg-white max-w-lg w-full mx-4 p-6 rounded-lg shadow-2xl" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-2xl font-bold text-gray-800">Your Results</h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            </div>
            <p class="text-gray-700 mb-4">Here is a breakdown of your score. Review the questions above for detailed feedback.</p>
            <div class="space-y-3">
                <div class="flex justify-between p-3 bg-gray-50 rounded-md">
                    <span class="font-semibold text-gray-700">Section A (Multiple Choice):</span>
                    <span id="score-a" class="font-bold text-blue-600"></span>
                </div>
                <div class="flex justify-between p-3 bg-gray-50 rounded-md">
                    <span class="font-semibold text-gray-700">Section B (True/False):</span>
                    <span id="score-b" class="font-bold text-blue-600"></span>
                </div>
                <div class="flex justify-between p-3 bg-gray-50 rounded-md">
                    <span class="font-semibold text-gray-700">Section C (Mixed):</span>
                    <span id="score-c" class="font-bold text-blue-600"></span>
                </div>
                <hr class="my-3"/>
                <div class="flex justify-between p-4 bg-blue-50 rounded-md">
                    <span class="font-bold text-xl text-blue-800">Total Score:</span>
                    <span id="score-total" class="font-bold text-xl text-blue-800"></span>
                </div>
            </div>
            <button onclick="closeModal()" class="w-full mt-6 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                Close
            </button>
        </div>
    </div>


    <script>
        // --- Exam Data Store ---
        const examData = {
            sectionA: [
                // ----- NEW EXPANDED SECTION A (35 Questions) -----
                { question: "1. Who created Python in 1991?", options: ["Thendo Siphuma", "Jake VanderPlas", "Guido van Rossum", "Eduvos LMS"], answer: 2 },
                { question: "2. Which Python distribution, described as a 'scientific python distribution,' is used in this module?", options: ["Spyder", "Anaconda", "Pyplot", "NumPy"], answer: 1 },
                { question: "3. According to the discussions we had in class, what does Python use to denote the scope of code blocks?", options: ["Semicolons", "Curly braces { }", "Parentheses ( )", "Whitespace (indentation)"], answer: 3 },
                { question: "4. Which operator in Python is used for exponents (e.g., Num1 to the power of Num2)?", options: ["^", "**", "exp()", "//"], answer: 1 },
                { question: "5. Which of the following is NOT listed as a principle of Object Oriented Programming (OOP)?", options: ["Encapsulation", "Abstraction", "Inheritance", "Iteration"], answer: 3 },
                { question: "6. Which OOP principle allows you to have methods with the same name that can have different implementations?", options: ["Polymorphism", "Abstraction", "Data Hiding", "Inheritance"], answer: 0 },
                { question: "7. In NumPy, what is the core n-dimensional array object called?", options: ["DataFrame", "list", "ndarray", "vector"], answer: 2 },
                { question: "8. Which NumPy function returns the *element-wise* multiplication of two arrays?", options: ["np.matmul()", "np.dot()", "np.multiply()", "np.array()"], answer: 2 },
                { question: "9. What does the term 'NumPy' stand for?", options: ["Number Python", "Numerical Python", "New Python", "N-dimensional Python"], answer: 1 },
                { question: "10. Which Pandas command converts an object (like a list or dictionary) into a DataFrame?", options: ["pd.DataFrame(object)", "pd.read_csv(object)", "df.info(object)", "df.convert(object)"], answer: 0 },
                { question: "11. Which Pandas command checks for missing values in your dataset?", options: ["df.dropna()", "df.fillna(x)", "pd.isnull()", "df.describe()"], answer: 2 },
                { question: "12. In Matplotlib, what is the common alias used when importing the `matplotlib.pyplot` submodule?", options: ["import matplotlib.pyplot as np", "import matplotlib.pyplot as pd", "import matplotlib.pyplot as plt or pypt", "import matplotlib.pyplot as mat"], answer: 2 },
                { question: "13. Which Matplotlib command is used to create a bar graph?", options: ["plt.plot()", "plt.scatter()", "plt.bar()", "plt.hist()"], answer: 2 },
                { question: "14. Which program control structure is used when you *don't* know how many rows of data you will be working with?", options: ["if statement", "for in loop", "while loop", "try...except block"], answer: 2 },
                { question: "15. Which Python data structure is immutable, meaning it cannot be modified after it is created?", options: ["List", "Dictionary", "Tuple", "NumPy array"], answer: 2 },
                { question: "16. Which of the following data types CANNOT be used as a key in a Python dictionary?", options: ["A tuple", "An integer", "A string", "A list"], answer: 3 },
                { question: "17. What is the method of using tallies (four lines and a cross-through) to digest large amounts of data called?", options: ["Frequency distribution table", "Random sampling", "Probability plot", "Tally method"], answer: 3 },
                { question: "18. A researcher selects a sample based on criteria, such as only selecting men for a study on a specific medication. This is:", options: ["Random Sampling", "Non-Random Sampling", "Stratified Sampling", "Systematic Sampling"], answer: 1 },
                { question: "19. Data that is 'discrete and ordered' (e.g., highest form of education) is known as:", options: ["Nominal data", "Ordinal data", "Interval data", "Ratio data"], answer: 1 },
                { question: "20. Which type of data has a measurable zero value (e.g., height, weight)?", options: ["Interval data", "Ratio data", "Nominal data", "Ordinal data"], answer: 1 },
                { question: "21. Machine learning algorithms are split into which two main categories?", options: ["Regression and Classification", "Supervised and Unsupervised", "Trees and Networks", "K-Means and K-Nearest"], answer: 1 },
                { question: "22. Which algorithm is described as 'one of the most versatile' because it can cover both classification and regression (prediction)?", options: ["Linear Regression", "K-Means Clustering", "Neural Networks", "Tree based algorithms"], answer: 3 },
                { question: "23. Which algorithm is an *unsupervised* model that places observations into a specified number, *k*, of groups?", options: ["K-Nearest Neighbours", "K-Means Clustering", "Logistic Regression", "Decision Tree"], answer: 1 },
                { question: "24. Which type of neural network is closely associated with facial recognition?", options: ["Feedforward Neural Network", "Convolutional Neural Network (CNN)", "Logistic Regression", "K-Nearest Neighbours"], answer: 1 },
                { question: "25. When was the Python 2.0 release?", options: ["1989", "1991", "2000", "2008"], answer: 2 },
                { question: "26. Which is NOT listed as a reason Python is used for Data Science?", options: ["Lightweight", "Intuitive syntax", "Fastest execution speed of any language", "Extensive data science libraries"], answer: 2 },
                { question: "27. Which string operation prints a section of a string, skipping every second character?", options: ["print(string[4:7])", "print(string.slice(4,7,2))", "print(string[4:7:2])", "print(string.split(2))"], answer: 2 },
                { question: "28. What command is used to create a custom exception?", options: ["assert Exception(...)", "raise Exception(...)", "try Exception(...)", "new Exception(...)"], answer: 1 },
                { question: "29. What is another name for the OOP principle of Inheritance?", options: ["Specialization", "Data Hiding", "Polymorphism", "Abstraction"], answer: 0 },
                { question: "30. Which Pandas command returns summary statistics for numerical columns in your data frame?", options: ["df.info()", "df.describe()", "df.corr()", "df.mean()"], answer: 1 },
                { question: "31. How do you sort a DataFrame `df` by `col1` in *descending* order?", options: ["df.sort_values(col1)", "df.sort_values(col1, ascending=False)", "df.sort(col1, 'desc')", "df.sort_values(col1, descending=True)"], answer: 1 },
                { question: "32. What is the statistical term for a 'whole that includes all of the items and characteristics of your research'?", options: ["Sample", "Population", "Frequency", "Mean"], answer: 1 },
                { question: "33. A researcher interviewing personages that are knowledgeable in a field is using what sampling method?", options: ["Quota Sampling", "Availability Sampling", "Expert Sampling", "Simple Random Sampling"], answer: 2 },
                { question: "34. A linear regression model that can handle non-linear results, like diminishing returns, is called:", options: ["Logistic Regression", "K-Means Clustering", "Polynomial Regression", "A Decision Tree"], answer: 2 }
            ],
            sectionB: [
                // ----- NEW EXPANDED SECTION B (35 Questions) -----
                { question: "1. True / False: Python was created by Guido van Rossum in 1989.", answer: false },
                { question: "2. True / False: The `Spyder` IDE is used in this module because it has error checking built in.", answer: true },
                { question: "3. True / False: Python uses semicolons (;) to end lines, just like many other programming languages.", answer: false },
                { question: "4. True / False: The `//` operator in Python performs standard division and always results in a float.", answer: false },
                { question: "5. True / False: An `IndentationError` will occur if you fail to indent a code block after an `if` statement.", answer: true },
                { question: "6. True / False: 'Data hiding' is another name for the OOP principle of Encapsulation.", answer: true },
                { question: "7. True / False: A function defined with `def add(x, y):` and no `return` keyword is an example of a function with an 'Argument, no return value'.", answer: true },
                { question: "8. True / False: The `np.dot(arr1, arr2)` function returns the element-wise multiplication of two arrays.", answer: false },
                { question: "9. True / False: The `df.tail(n)` command in Pandas returns the first *n* rows in your data frame.", answer: false },
                { question: "10. True / False: The `df.corr()` command returns the correlation between columns in your data frame.", answer: true },
                { question: "11. True / False: Matplotlib is an open-source library.", answer: true },
                { question: "12. True / False: Pie charts are covered in detail because they are highly efficient at showing information.", answer: false },
                { question: "13. True / False: A `for in` loop is used when you know exactly how many times you want your code to repeat.", answer: true },
                { question: "14. True / False: Syntax errors occur when code with correct syntax results in an error in your program.", answer: false },
                { question: "15. True / False: In a Python dictionary, keys can be duplicated, but values must be unique.", answer: false },
                { question: "16. True / False: A Python `list` is a suitable data type for a dictionary key.", answer: false },
                { question: "17. True / False: Probability is measured on a scale from 0 to 1, where the state 1 means the occurrence is guaranteed.", answer: false },
                { question: "18. True / False: Expert sampling is a form of random sampling.", answer: false },
                { question: "19. True / False: Discrete data can be measured, but not counted.", answer: false },
                { question: "20. True / False: Supervised learning makes use of labelled data, where you tell the model what it is looking at.", answer: true },
                { question: "21. True / False: Linear regression is most useful when working with categorical values, like 'dog' or 'cat'.", answer: false },
                { question: "22. True / False: K-Nearest Neighbours is a simple but popular method for *classifying* data.", answer: true },
                { question: "23. Python was conceived in the late 1980s and implementation began in December 1989.", answer: true },
                { question: "24. The `/` operator in Python (e.g., `10 / 5`) will always result in a float.", answer: true },
                { question: "25. The `string.index(char)` command prints the location of *all* occurrences of a character.", answer: false },
                { question: "26. The `pass` command in an `except` block instructs your application to ignore that specific exception and continue.", answer: true },
                { question: "27. A function with 'no argument, return value' (e.g., `def multi():`) would *not* use the `return` keyword.", answer: false },
                { question: "28. `np.dot(array1, array2)` returns the matrix product of the two arrays.", answer: false },
                { question: "29. The command `df1.append(df2)` adds the *columns* in df1 to the end of df2.", answer: false },
                { question: "30. The `pypt.grid(True)` command adds labels to the X-Axis and Y-Axis.", answer: false },
                { question: "31. Simple Random Sampling is a type of Non-Random Sampling.", answer: false },
                { question: "32. Nominal data can be visualized by making use of a pie chart or a bar chart.", answer: true },
                { question: "33. Continuous data can be counted, but not measured.", answer: false },
                { question: "34. Overtraining a neural network makes it perform perfectly on real data, but poorly on the sample data.", answer: false },
                { question: "35. The `df.info()` command returns the index, data type, and memory information.", answer: true }
            ],
            sectionC: {
                // ----- NEW EXPANDED SECTION C (32 Questions) -----
                matching: {
                    definitions: [
                        { letter: "A", text: "Used to plot data on a 2D axis for easy analyzing." },
                        { letter: "B", text: "An ordered sequence of items; similar to an array but can store different data types and is modifiable." },
                        { letter: "C", text: "An unsupervised algorithm that places observations into *k* groups." },
                        { letter: "D", text: "A package for multidimensional array objects and array processing routines." },
                        { letter: "E", "text": "Used to analyze massive datasets; creates a data frame object similar to an excel spreadsheet." },
                        { letter: "F", text: "Stores information as a `key:value` pair." },
                        { letter: "G", text: "A classification algorithm that predicts the *probability* an observation falls within a class." },
                        { letter: "H", text: "Used for facial recognition; finds patterns (ears, noses) and combines them." },
                        { letter: "I", text: "Similar to a list, but is not modifiable (immutable) once created." },
                        { letter: "J", text: "Used for quantitative values (prices, age); assumes a linear relationship between features and target." },
                        { letter: "K", text: "Returns the first n rows in your data frame." },
                        { letter: "L", text: "A block used to handle exceptions and prevent the application from crashing." }
                    ],
                    terms: [
                        { id: "c1", question: "1. NumPy", answer: "D" },
                        { id: "c2", question: "2. Pandas", answer: "E" },
                        { id: "c3", question: "3. Matplotlib", answer: "A" },
                        { id: "c4", question: "4. List", answer: "B" },
                        { id: "c5", question: "5. Tuple", answer: "I" },
                        { id: "c6", question: "6. Dictionary", answer: "F" },
                        { id: "c7", question: "7. K-Means Clustering", answer: "C" },
                        { id: "c8", question: "8. Logistic Regression", answer: "G" },
                        { id: "c9", question: "9. CNN", answer: "H" },
                        { id: "c10", question: "10. Linear Regression", answer: "J" },
                        { id: "c11_new", question: "11. df.head(n)", answer: "K" },
                        { id: "c12_new", question: "12. try...except", answer: "L" }
                    ]
                },
                fillBlank: [
                    { id: "c11", question: "13. The OOP principle of __BLANK__, also known as data hiding, is used to hide the implementation of data.", answer: "Encapsulation" },
                    { id: "c12", question: "14. The OOP principle of __BLANK__ allows us to reuse code from a superclass in a subclass.", answer: "Inheritance" },
                    { id: "c13", question: "15. A __BLANK__ __BLANK__ occurs when you make a mistake in your python commands, such as a spelling mistake.", answer: "syntax error" },
                    { id: "c14", question: "16. An __BLANK__ occurs when code that has the correct syntax results in an error in your program.", answer: "exception" },
                    { id: "c15", question: "17. __BLANK__ learning makes use of labelled data, where you tell the model what it is looking at.", answer: "Supervised" },
                    { id: "c16", question: "18. __BLANK__ data represents characteristics, such as a person's gender or hair colour.", answer: "Categorical" },
                    { id: "c17_new", question: "19. Data that is 'discrete and ordered' (e.g., education level) is known as __BLANK__ data.", answer: "Ordinal" },
                    { id: "c18_new", question: "20. Data with ordered units but *no true zero* (like temperature) is __BLANK__ data.", answer: "Interval" },
                    { id: "c19_new", question: "21. The simplest variation of a Neural Network, which feeds a value through hidden layers, is a __BLANK__ network.", answer: "Feedforward" },
                    { id: "c20_new", question: "22. The problem where a network performs perfectly on a sample but is inefficient on real data is called __BLANK__.", answer: "Overtraining" }
                ],
                fillCode: [
                    { id: "c21_code", scenario: "23. Write a single-line comment in Python.", code: "__BLANK__ This is a single line comment.", answers: ["#"] },
                    { id: "c22_code", scenario: "24. Create a multi-line comment in Python.", code: "__BLANK__\nThis\nis a\nmulti-line\ncomment\n__BLANK__", answers: ['"""', '"""'] },
                    { id: "c23_code", scenario: "25. Complete this 'if-else' statement to make it valid.", code: "test = 2\nif test == 2__BLANK__\n    print(\"test was 2\")\n__BLANK__:\n    print(\"test was not 2\")", answers: [":", "else"] },
                    { id: "c24_code", scenario: "26. Complete this 'while' loop to run as long as 'test' is less than or equal to 3.", code: "test = 1\n__BLANK__ test <= 3:\n    test += 1\n    print(test)", answers: ["while"] },
                    { id: "c25_code", scenario: "27. Complete this 'for' loop to iterate through the keys of the dictionary.", code: "dictio = {1: 'one', 2: 'two'}\nfor __BLANK__ in dictio:\n    print(key)", answers: ["key"] },
                    { id: "c26_code", scenario: "28. Import the NumPy library using its standard alias 'np'.", code: "import __BLANK__ as np", answers: ["numpy"] },
                    { id: "c27_code", scenario: "29. Use the correct NumPy function to create an array from the given list.", code: "x = np.__BLANK__([[1,2], [3,4]])", answers: ["array"] },
                    { id: "c28_code", scenario: "30. Import the 'pyplot' submodule from Matplotlib with the alias 'pypt'.", code: "import matplotlib.__BLANK__ as pypt", answers: ["pyplot"] },
                    { id: "c29_code", scenario: "31. First, create a line 'plot' with the x and y data. Second, 'show' the plot.", code: "x = [1,2,3,4]\ny = [1,2,3,4]\npypt.__BLANK__(x,y)\npypt.__BLANK__()", answers: ["plot", "show"] },
                    { id: "c30_code", scenario: "32. Complete the syntax for an exception handling block to catch an error.", code: "__BLANK__:\n    # some code here\n__BLANK__:\n    # handle exception here", answers: ["try", "except"] }
                ]
            }
        };

        // --- Global Variables ---
        const score = {
            a: 0,
            b: 0,
            c: 0,
            total: 0
        };
        const totals = {
            a: examData.sectionA.length,
            b: examData.sectionB.length,
            c: 0 // Will be calculated dynamically
        };

        // --- Exam Rendering Functions ---

        document.addEventListener('DOMContentLoaded', () => {
            renderSectionA();
            renderSectionB();
            renderSectionC();
            
            document.getElementById('submit-btn').addEventListener('click', submitExam);
        });

        function renderSectionA() {
            const container = document.getElementById('section-a-content');
            let html = '';
            examData.sectionA.forEach((q, index) => {
                html += `
                    <div class="question-block p-4 bg-gray-50 rounded-lg border border-gray-200" id="qA${index}-block">
                        <p class="font-semibold text-gray-800 mb-3">${q.question}</p>
                        <div class="space-y-2">
                            ${q.options.map((opt, i) => `
                                <div>
                                    <input type="radio" name="qA${index}" id="qA${index}o${i}" value="${i}" class="form-radio text-blue-600">
                                    <label for="qA${index}o${i}" class="ml-2 text-gray-700">
                                        <span id="qA${index}o${i}-label">${opt}</span>
                                    </label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        function renderSectionB() {
            const container = document.getElementById('section-b-content');
            let html = '';
            examData.sectionB.forEach((q, index) => {
                html += `
                    <div class="question-block p-4 bg-gray-50 rounded-lg border border-gray-200" id="qB${index}-block">
                        <p class="font-semibold text-gray-800 mb-3">${q.question}</p>
                        <div class="space-x-4">
                            <input type="radio" name="qB${index}" id="qB${index}true" value="true" class="form-radio text-blue-600">
                            <label for="qB${index}true" class="ml-1 text-gray-700">
                                <span id="qB${index}true-label">True</span>
                            </label>
                            
                            <input type="radio" name="qB${index}" id="qB${index}false" value="false" class="form-radio text-blue-600">
                            <label for="qB${index}false" class="ml-1 text-gray-700">
                                <span id="qB${index}false-label">False</span>
                            </label>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        function renderSectionC() {
            const container = document.getElementById('section-c-content');
            let html = '';
            
            // Part 1: Matching
            html += renderSectionCMatching();
            
            // Part 2: Fill-in-the-Blank
            html += renderSectionCFillBlank();
            
            // Part 3: Fill-in-the-Code
            html += renderSectionCFillCode();
            
            container.innerHTML = html;
        }

        function renderSectionCMatching() {
            const data = examData.sectionC.matching;
            let definitionsHtml = data.definitions.map(def => `
                <li class="flex text-sm">
                    <span class="font-bold w-6 text-gray-800">${def.letter}.</span>
                    <span class="text-gray-700">${def.text}</span>
                </li>
            `).join('');

            let termsHtml = data.terms.map(term => `
                <div class="flex items-center space-x-2">
                    <input type="text" id="${term.id}" class="form-input w-12 text-center font-bold uppercase border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" maxlength="1">
                    <label for="${term.id}" class="text-gray-800">${term.question}</label>
                    <span id="${term.id}-feedback" class="feedback-span"></span>
                </div>
            `).join('');

            return `
                <div class="question-block p-4 bg-gray-50 rounded-lg border border-gray-200" id="section-c-matching-block">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Part 1: Matching</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Terms Column -->
                        <div class="space-y-3">
                            ${termsHtml}
                        </div>
                        <!-- Definitions Column -->
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <ul class="space-y-2">
                                ${definitionsHtml}
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderSectionCFillBlank() {
            const data = examData.sectionC.fillBlank;
            let questionsHtml = data.map(q => {
                const placeholder = q.question.includes('__BLANK__ __BLANK__') ? 'word1 word2' : '...';
                const inputHtml = `<input type="text" id="${q.id}" class="form-input mx-1 w-48 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="${placeholder}">`;
                const questionText = q.question.replace(/__BLANK__ __BLANK__|__BLANK__/g, inputHtml);
                
                return `
                    <div class="question-block p-4" id="${q.id}-block">
                        <label for="${q.id}" class="text-gray-800">${questionText}</label>
                        <span id="${q.id}-feedback" class="feedback-span ml-2"></span>
                    </div>
                `;
            }).join('');
            
            return `
                <div class="p-4 bg-gray-50 rounded-lg border border-gray-200" id="section-c-fillblank-block">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Part 2: Fill-in-the-Blank</h3>
                    <div class="space-y-4">
                        ${questionsHtml}
                    </div>
                </div>
            `;
        }
        
        function renderSectionCFillCode() {
            const data = examData.sectionC.fillCode;
            let questionsHtml = data.map((q, qIndex) => {
                let inputIndex = 0;
                // Regex to find __BLANK__ and replace it with an input, maintaining newlines
                const codeText = q.code.replace(/__BLANK__/g, () => {
                    const id = `${q.id}-blank${inputIndex++}`;
                    return `<input type="text" id="${id}" class="code-input"> <span id="${id}-feedback" class="feedback-span"></span>`;
                });
                
                return `
                    <div class="question-block p-4" id="${q.id}-block">
                        <p class="text-gray-800 font-medium mb-2">${q.scenario}</p>
                        <pre class="bg-gray-800 text-white p-4 rounded-md overflow-x-auto"><code class="font-mono">${codeText}</code></pre>
                    </div>
                `;
            }).join('');
            
            return `
                <div class="p-4 bg-gray-50 rounded-lg border border-gray-200" id="section-c-fillcode-block">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Part 3: Fill-in-the-Code</h3>
                    <div class="space-y-4">
                        ${questionsHtml}
                    </div>
                </div>
            `;
        }


        // --- Grading and Modal Functions ---

        function submitExam() {
            resetFeedback();
            
            gradeSectionA();
            gradeSectionB();
            gradeSectionC();
            
            const totalScore = score.a + score.b + score.c;
            const totalPossible = totals.a + totals.b + totals.c;
            
            document.getElementById('score-container').innerText = `Your Total Score: ${totalScore} / ${totalPossible}`;
            
            // Show modal
            document.getElementById('score-a').innerText = `${score.a} / ${totals.a}`;
            document.getElementById('score-b').innerText = `${score.b} / ${totals.b}`;
            document.getElementById('score-c').innerText = `${score.c} / ${totals.c}`;
            document.getElementById('score-total').innerText = `${totalScore} / ${totalPossible}`;
            document.getElementById('results-modal').classList.remove('hidden');
            document.getElementById('results-modal').classList.add('flex');
        }

        function resetFeedback() {
            score.a = 0;
            score.b = 0;
            score.c = 0;
            totals.c = 0; // Will be recalculated
            
            const blocks = document.querySelectorAll('.question-block');
            blocks.forEach(b => {
                b.classList.remove('correct', 'incorrect');
            });
            
            const inputs = document.querySelectorAll('input.correct, input.incorrect');
            inputs.forEach(i => {
                i.classList.remove('correct', 'incorrect');
            });

            const labels = document.querySelectorAll('.label-correct, .label-incorrect');
            labels.forEach(l => {
                l.classList.remove('label-correct', 'label-incorrect');
            });
            
            const feedbackSpans = document.querySelectorAll('.feedback-span');
            feedbackSpans.forEach(s => {
                s.innerHTML = '';
            });
        }
        
        function gradeSectionA() {
            examData.sectionA.forEach((q, index) => {
                const block = document.getElementById(`qA${index}-block`);
                const selected = document.querySelector(`input[name="qA${index}"]:checked`);
                const correctAnswerIndex = q.answer;
                
                // Always highlight the correct answer in green
                document.getElementById(`qA${index}o${correctAnswerIndex}-label`).classList.add('label-correct');

                if (selected) {
                    const selectedAnswerIndex = parseInt(selected.value);
                    if (selectedAnswerIndex === correctAnswerIndex) {
                        score.a++;
                        block.classList.add('correct');
                    } else {
                        block.classList.add('incorrect');
                        // Highlight their incorrect choice in red
                        document.getElementById(`qA${index}o${selectedAnswerIndex}-label`).classList.add('label-incorrect');
                    }
                } else {
                    block.classList.add('incorrect'); // No answer selected
                }
            });
        }
        
        function gradeSectionB() {
            examData.sectionB.forEach((q, index) => {
                const block = document.getElementById(`qB${index}-block`);
                const selected = document.querySelector(`input[name="qB${index}"]:checked`);
                const correctAnswer = q.answer; // true or false
                
                // Always highlight the correct answer label in green
                document.getElementById(`qB${index}${correctAnswer}-label`).classList.add('label-correct');
                
                if (selected) {
                    const selectedValue = selected.value === 'true'; // Convert to boolean
                    if (selectedValue === correctAnswer) {
                        score.b++;
                        block.classList.add('correct');
                    } else {
                        block.classList.add('incorrect');
                        // Highlight their incorrect choice in red
                        document.getElementById(`qB${index}${selectedValue}-label`).classList.add('label-incorrect');
                    }
                } else {
                    block.classList.add('incorrect'); // No answer selected
                }
            });
        }

        function gradeSectionC() {
            // Grade Matching
            examData.sectionC.matching.terms.forEach(term => {
                totals.c++;
                const input = document.getElementById(term.id);
                const feedback = document.getElementById(`${term.id}-feedback`);
                const value = input.value.trim().toUpperCase();
                
                if (value === term.answer) {
                    score.c++;
                    input.classList.add('correct');
                } else {
                    input.classList.add('incorrect');
                    feedback.innerHTML = `<span class="feedback-text-incorrect">(Correct: ${term.answer})</span>`;
                }
            });

            // Grade Fill-in-Blank
            examData.sectionC.fillBlank.forEach(q => {
                totals.c++;
                const input = document.getElementById(q.id);
                const feedback = document.getElementById(`${q.id}-feedback`);
                const value = input.value.trim().toLowerCase();
                
                if (value === q.answer.toLowerCase()) {
                    score.c++;
                    input.classList.add('correct');
                } else {
                    input.classList.add('incorrect');
                    feedback.innerHTML = `<span class="feedback-text-incorrect">(Correct: ${q.answer})</span>`;
                }
            });
            
            // Grade Fill-in-Code
            examData.sectionC.fillCode.forEach(q => {
                q.answers.forEach((answer, index) => {
                    totals.c++;
                    const input = document.getElementById(`${q.id}-blank${index}`);
                    const feedback = document.getElementById(`${q.id}-blank${index}-feedback`);
                    const value = input.value.trim();
                    
                    if (value.toLowerCase() === answer.toLowerCase()) {
                        score.c++;
                        input.classList.add('correct');
                        feedback.innerHTML = `<span class="code-feedback-correct"></span>`;
                    } else {
                        input.classList.add('incorrect');
                        feedback.innerHTML = `<span class="code-feedback-incorrect">(Correct: ${answer})</span>`;
                    }
                });
            });
        }

        function closeModal() {
            const modal = document.getElementById('results-modal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

    </script>

</body>
</html>